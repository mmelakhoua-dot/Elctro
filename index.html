<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GamerLink | Ø³ÙˆÙ‚ Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</title>
    <style>
        body { 
            background-color: #0f172a; 
            color: white; 
            font-family: 'Segoe UI', sans-serif; 
            padding: 20px; 
            margin: 0;
        }
        h1, h2 { text-align: center; }
        .card { 
            background: #1e293b; 
            padding: 15px; 
            border-radius: 10px; 
            margin-bottom: 15px; 
            border: 1px solid #334155; 
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
        }
        input, textarea { 
            width: 100%; 
            padding: 10px; 
            margin: 5px 0; 
            border-radius: 5px; 
            border: none; 
            background: #0f172a; 
            color: white; 
        }
        button { 
            background: #8b5cf6; 
            color: white; 
            border: none; 
            padding: 12px; 
            width: 100%; 
            border-radius: 5px; 
            font-weight: bold; 
            cursor: pointer; 
            transition: background 0.2s;
        }
        button:hover { background: #7c3aed; }
        .price { 
            color: #10b981; 
            font-weight: bold; 
            font-size: 1.2rem; 
        }
        @media(max-width:600px){
            body { padding: 10px; }
            button { padding: 10px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <h1>ğŸ® GamerLink</h1>

    <div class="card">
        <h3>Ù†Ø´Ø± Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ (Ø¹Ù…ÙˆÙ„Ø© 5%)</h3>
        <input type="text" id="game" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©">
        <input type="number" id="price" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± TND">
        <textarea id="desc" placeholder="ÙˆØµÙ Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ØŒ Ø§Ù„Ø³ÙƒÙ†Ø§Øª...)"></textarea>
        <button onclick="addAccount()">Ù†Ø´Ø± Ø§Ù„Ø¢Ù† âœ…</button>
    </div>

    <hr>
    <h2>Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©</h2>
    <div id="market">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "Ø¶Ø¹_Ù‡Ù†Ø§_API_KEY",
            authDomain: "gamerlink-tn.firebaseapp.com",
            projectId: "gamerlink-tn",
            storageBucket: "gamerlink-tn.appspot.com",
            appId: "Ø¶Ø¹_Ù‡Ù†Ø§_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const market = document.getElementById('market');

        // Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
        async function loadAccounts() {
            market.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
            const q = query(collection(db, "accounts"), orderBy("date", "desc"));
            const querySnapshot = await getDocs(q);
            market.innerHTML = "";
            querySnapshot.forEach((doc) => {
                const acc = doc.data();
                market.innerHTML += `
                    <div class="card">
                        <h4>${acc.game}</h4>
                        <p>${acc.desc || ''}</p>
                        <div class="price">${acc.price} TND</div>
                        <button style="background:#10b981; margin-top:10px;">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù† ğŸ’³</button>
                    </div>`;
            });
        }

        window.addAccount = async () => {
            const game = document.getElementById('game').value.trim();
            const price = document.getElementById('price').value.trim();
            const desc = document.getElementById('desc').value.trim();

            if(!game || !price){
                alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ§Ù„Ø³Ø¹Ø±!");
                return;
            }

            await addDoc(collection(db, "accounts"), { game, price, desc, date: new Date() });
            alert("ØªÙ… Ø§Ù„Ù†Ø´Ø±! Ø³ÙŠØ¸Ù‡Ø± Ø­Ø³Ø§Ø¨Ùƒ Ù„Ù„Ø¬Ù…ÙŠØ¹.");

            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
            loadAccounts();

            // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('game').value = '';
            document.getElementById('price').value = '';
            document.getElementById('desc').value = '';
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        loadAccounts();
    </script>

</body>
</html>
